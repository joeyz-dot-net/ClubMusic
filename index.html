<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes,viewport-fit=cover" />
	
	<!-- Primary Metadata -->
	<title>音乐点播 支持YouTube串流</title>
	<meta name="description" content="音乐点播系统，支持串流" />
	<meta name="keywords" content="音乐,点播,串流,mp3,flac,wav" />
	
	<!-- Open Graph -->
	<meta property="og:type" content="website" />
	<meta property="og:title" content="音乐点播 支持YouTube串流" />
	<meta property="og:site_name" content="音乐点播 支持YouTube串流" />
	<meta property="og:url" content="{{ request.url }}" />
	<meta property="og:description" content="音乐点播系统，支持YouTube串流" />
	<meta property="og:image" content="preview.png" />
	<meta property="og:image:secure_url" content="preview.png" />
	<meta property="og:image:width" content="1200" />
	<meta property="og:image:height" content="630" />
	<meta property="og:image:alt" content="音乐点播 支持YouTube串流预览图" />
	<link rel="image_src" href="preview.png" />
	<!-- Twitter / Summary card -->
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="音乐点播 支持YouTube串流" />
	<meta name="twitter:description" content="音乐点播系统，支持YouTube串流" />
	<meta name="twitter:image" content="preview.png" />
	<meta property="og:image:width" content="1200" />
	<meta property="og:image:height" content="630" />
	<meta property="og:locale" content="en_US" />
	
	<!-- Clubhouse Frames -->
	<meta property="fc:frame" content="vNext" />
	<meta property="fc:frame:image" content="preview.png" />
	<meta property="fc:frame:image:aspect_ratio" content="1.91:1" />
	<meta property="fc:frame:button:1" content="进入点播" />
	<meta property="fc:frame:button:1:action" content="post_redirect" />
	<meta property="fc:frame:button:1:target" content="{{ request.url }}" />
	<meta property="fc:frame:post_url" content="{{ request.url }}" />
	
	<!-- iOS/Mobile -->
	<meta name="mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-title" content="音乐点播" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="theme-color" content="#1e1f24" />
	
	<!-- Compatibility -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="renderer" content="webkit" />
	<link rel="stylesheet" href="/static/style.css" />
</head>
<body>
	<header id="headerBar" class="header-expanded">
		<div id="headerContent">
			<div class="toolbar">
				<script id="boot-data" type="application/json">{{ {'tree': tree, 'musicDir': music_dir}|tojson }}</script>
				<div class="youtube-search-section" id="youtubeSearchSection">
					<div class="youtube-search-group">
						<input id="youtubeSearchInput" class="youtube-search-input" type="text" placeholder="搜索或粘贴YouTube链接..." autocomplete="off" />
						<button id="youtubeSearchBtn" class="youtube-btn primary">搜索</button>
						<button id="youtubeMenuBtn" class="youtube-menu-btn" title="更多选项">⋮</button>
						<!-- 搜索历史下拉列表 -->
						<div id="youtubeSearchHistory" class="youtube-search-history" style="display:none;">
							<div id="youtubeSearchHistoryList" class="youtube-search-history-list"></div>
						</div>
						<!-- 下拉菜单 -->
						<div id="youtubeMenu" class="youtube-menu" style="display:none;">
							<button id="historyMenuBtn" class="youtube-menu-item" data-action="history" disabled="true">📋 播放历史</button>
							<button id="localMenuBtn" class="youtube-menu-item" data-action="local">🎵 本地歌曲</button>
							<button id="clearQueueMenuBtn" class="youtube-menu-item" data-action="clear">🗑️ 清空队列</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>
	<main id="tree" class="tab-content local-tab local-theme" style="display:none;" aria-label="文件列表"></main>
	<div id="youtubePlaylist" class="tab-content youtube-tab youtube-theme" aria-label="YouTube播放列表">
		
		<div id="youtubeSearchResults" class="youtube-search-results" style="display:none;">
			<h4 class="youtube-search-title">搜索结果</h4>
			<div id="youtubeSearchList" class="youtube-search-list"></div>
		</div>
		
		<div class="youtube-queue-section" id="youtubeQueueSection">
		
			<div id="youtubeQueueList" class="youtube-queue-list"></div>
		</div>
		<!-- YouTube搜索结果模态框 -->
		<div id="youtubeSearchModal" class="youtube-search-modal" style="display:none;">
			<div class="youtube-search-modal-content">
				<div class="youtube-search-modal-header">
					<h3>搜索结果</h3>
					<button class="youtube-search-modal-close" data-icon="✕">✕</button>
				</div>
				<div class="youtube-search-modal-body">
					<div id="youtubeSearchModalList" class="youtube-search-modal-list"></div>
				</div>
			</div>
		</div>
	</div>
	
	<footer id="playerBar" class="footer-collapsed">
		<div id="playerProgress" aria-hidden="true">
			<div id="playerProgressFill"></div>
			<div id="playerProgressThumb"></div>
		</div>
		<div id="footerContent" class="footer-content">
			<div id="nowPlaying">未播放</div>
			<div class="footer-controls-wrapper">
			<div class="footer-controls-left">
				<button id="loopBtn" class="control-btn loop-btn" data-icon="↻" title="循环模式">↻</button>
				<button id="prevBtn" class="control-btn" data-icon="⼮" title="上一首">⏮</button>
			</div>
				<button id="playPauseBtn" class="control-btn play-pause-large" data-icon="▶" title="播放/暂停">▶</button>
			<div class="footer-controls-right">
				<button id="nextBtn" class="control-btn" data-icon="⏭" title="下一首">⏭</button>
				
				<button id="volumePopupBtn" class="control-btn" data-icon="🔊" title="音量">🔊</button>
			</div>
			</div>
		</div>
		<!-- Volume popup slider - entire popup is the slider -->
		<div id="volumePopup" class="volume-popup" style="display:none;">
			<div id="volumeSliderTrack" class="volume-slider-track">
				<div id="volumeSliderFill" class="volume-slider-fill"></div>
				<div id="volumeSliderThumb" class="volume-slider-thumb"></div>
			</div>
		</div>
	</footer>
	
	<!-- History modal -->
	<div id="historyModal" class="history-modal" style="display:none;">
		<div class="history-modal-content">
			<div class="history-modal-header">
				<h3>播放历史</h3>
				<button class="history-modal-close" data-icon="✕">✕</button>
			</div>
			<div class="history-modal-list" id="historyList"></div>
		</div>
	</div>

	<!-- Local songs modal -->
	<div id="localSongsModal" class="history-modal" style="display:none;">
		<div class="history-modal-content" style="width: 90%; max-width: 600px; max-height: 80vh;">
			<div class="history-modal-header">
				<h3>本地歌曲</h3>
				<button class="local-songs-modal-close" data-icon="✕">✕</button>
			</div>
			<div class="history-modal-list" id="localSongsModalBody" style="overflow:auto; max-height: calc(80vh - 64px);"></div>
		</div>
	</div>
	
	<script src="/static/main.js"></script>
	<script src="/static/youtube.js"></script>
</body>
</html>